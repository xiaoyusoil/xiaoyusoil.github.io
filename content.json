{"meta":{"title":"生鱼忧患","subtitle":"网络安全&软件开发","description":"","author":"真小鱼","url":"http://yoursite.com","root":"/"},"pages":[],"posts":[{"title":"'SPM维护'","slug":"SPM维护","date":"2020-05-18T11:36:45.000Z","updated":"2020-05-20T10:26:54.456Z","comments":true,"path":"2020/05/18/SPM维护/","link":"","permalink":"http://yoursite.com/2020/05/18/SPM%E7%BB%B4%E6%8A%A4/","excerpt":"","text":"软件项目管理实验—LRR维护准备工作1.安装wampserver集成服务器组件（Apache+PHP+Mysql/MariaDB）。 2.phpmyadmin新建lrr数据库并导入sql文件，两个sql文件任选其一。 3.安装HBuilderX或PhpStorm，进行必要的配置。 4.打开LRR即为成功。 维护流程1.明确bug，运行时错误，团队成员的名字在一组中多次出现。 http://118.25.96.118/bugzilla/show_bug.cgi?id=57 Hui Lan 2020-03-15 13:55:57 CST Repeated names in a course group QWQ- Leader : 陆博业(201732120119)Zhou Xianlong-201732120130 (Joined)陆博业-201732120119 (Created)吕伊豪-201732120120 (Joined)郑可富-201732120129 (Joined)郑可富-201732120129 (Joined)郑可富-201732120129 (Joined)郑可富-201732120129 (Joined)郑可富-201732120129 (Joined) 2.修改Script.php文件中的connection为本地root连接。 12&#x2F;&#x2F;$con&#x3D;mysqli_connect(&quot;localhost&quot;,&quot;Teecloudy&quot;,&quot;5q7Ol2e!#!&quot;,&quot;lrr&quot;);$con&#x3D;mysqli_connect(&quot;localhost&quot;,&quot;root&quot;,&quot;&quot;,&quot;lrr&quot;); 3.因为此bug是学生端创建组问题，因此以学生身份登录，UserType=Student。 4.问题复现。 创建Group，遇到的问题。 1234TypeError:$(...).dialog is not a function&#x2F;&#x2F;没有添加jquery-ui.css和jquery-ui.jsTypeError: r.getClientRects is not a function&#x2F;&#x2F;添加的jquery-ui的版本为1.10.4导致此问题，更新为最新的1.12.1就显示正常了 重复邀请好友，还原到问题根本。 猜测是系统没有判断该好友是否已加入队伍，好像很好修复，加个判断就行，那就来试一下。 5.代码审计。 定位到邀请好友模块。该页面处于Course.php中。 表单传递到Script.php中处理。 该Invite Group Request模块并未在插入数据之前检查这条数据的合理性（是否重复包含）。 在获取student_id后直接插入数据表course_group_members_table。 6.解决方法。在插入之前先查询，比较之后再执行sql语句。 123456$result &#x3D; mysqli_query($con,&quot;SELECT * FROM course_group_members_table where Course_Group_id &#x3D; &#39;$groupid&#39; and Student_ID &#x3D; &#39;$student_id&#39;&quot;);if(mysqli_num_rows($result)&gt;0)&#123; header(&quot;Location: Course.php?url&#x3D;&quot;.$url);&#125;else&#123; $sql&#x3D;&quot;INSERT INTO &#96;course_group_members_table&#96;( &#96;Course_Group_id&#96;, &#96;Student_ID&#96;, &#96;Status&#96;) VALUES ($groupid,$student_id,&#39;Invited&#39;)&quot;;&#125; 该if-else语句首先查询数据库中是否存在要添加的student_id，若返回结果集中行的数量大于0，则表示已存在该student_id，那么重定向到当前页面；否则执行添加student_id的sql语句。 注意：把数据库表course_groups_table和course_group_members_table中重复的student_id数据先手动删除，否则mysqli_num_rows()返回值会大于0。 ==============================分割线==================================================== 太惨了，我在这边弄了4个小时的这个if语句，老是302，我说怎么不存在的student_id也会返回&gt;0的行数，原来是忘了我之前添加了两次同一个student_id，导致执行结果当然是&gt;0，后来终于后知后觉返回结果=2，我太傻了。 ==============================分割线==================================================== 7.总结。 这个任务很简单，也有很多的解法，感谢老师给我分配了这么简单的任务🤞。 我重新学习了n久之前的sql（都忘得差不多了）。 用git bash push不上去，只能拿简单的github desktop来push了（又暴露智商了）。 遵循原子提交的原则，改了一点就往上push（老师说过这是一个优秀的代码狗的行为准则）。","categories":[],"tags":[{"name":"SPM","slug":"SPM","permalink":"http://yoursite.com/tags/SPM/"}]}],"categories":[],"tags":[{"name":"SPM","slug":"SPM","permalink":"http://yoursite.com/tags/SPM/"}]}